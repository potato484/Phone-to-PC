<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover, interactive-widget=overlays-content"
    />
    <meta name="theme-color" content="#1a1a2e" />
    <title>C2P Controller</title>
    <link rel="manifest" href="/manifest.json" />
    <link rel="stylesheet" href="/vendor/xterm.css" />
    <link rel="stylesheet" href="/style.css" />
  </head>
  <body>
    <div class="app">
      <header class="status-bar" aria-label="连接状态">
        <div class="status-indicators">
          <span id="control-signal" class="signal is-offline" aria-label="Control status"></span>
          <span class="signal-label">Control</span>
          <span id="terminal-signal" class="signal is-offline" aria-label="Terminal status"></span>
          <span class="signal-label">Terminal</span>
        </div>
        <div class="status-main">
          <p id="status-text" class="status-text">未连接</p>
          <p class="cwd-text">目录 <span id="cwd-text">-</span></p>
        </div>
        <button id="session-pill" class="session-pill" type="button" hidden title="复制会话 ID">
          会话 -
        </button>
      </header>

      <main id="terminal-wrap" aria-label="终端区域">
        <div id="terminal"></div>
      </main>

      <section id="dock" class="dock" aria-label="底部控制坞">
        <div id="session-tabs" class="session-tabs" role="tablist" aria-label="活跃会话" hidden></div>

        <div id="quick-keys" class="quick-keys" role="group" aria-label="快捷键">
          <button class="quick-key-btn" type="button" data-key="ctrl-c">^C</button>
          <button class="quick-key-btn" type="button" data-key="tab">Tab</button>
          <button class="quick-key-btn" type="button" data-key="shift-tab">⇤</button>
          <button class="quick-key-btn" type="button" data-key="/">/</button>
          <button class="quick-key-btn" type="button" data-key="up">↑</button>
          <button class="quick-key-btn" type="button" data-key="down">↓</button>
          <button class="quick-key-btn" type="button" data-key="esc">Esc</button>
          <button class="quick-key-btn" type="button" data-key="enter">⏎</button>
        </div>

        <div class="quick-actions">
          <button id="detach-btn" class="btn" type="button" disabled>关闭终端</button>
        </div>

        <button id="dock-handle" class="dock-handle" type="button" aria-expanded="false">
          控制面板
        </button>

        <div id="dock-panel" class="dock-panel">
          <div class="action-row">
            <button id="kill-btn" class="btn btn-danger" type="button" disabled>终止会话</button>
          </div>
        </div>
      </section>
    </div>

    <div id="toast-root" class="toast-root" aria-live="polite" aria-atomic="true"></div>

    <script src="/vendor/xterm.js"></script>
    <script src="/vendor/xterm-addon-fit.js"></script>
    <script src="/vendor/xterm-addon-webgl.js"></script>
    <script type="module" src="/app.js"></script>
  </body>
</html>
